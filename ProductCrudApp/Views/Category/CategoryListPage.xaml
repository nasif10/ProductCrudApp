<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProductCrudApp.Views.Category.CategoryListPage"
             Title="Category List">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Add" Order="Secondary" Command="{Binding AddCommand}" />
    </ContentPage.ToolbarItems>
    
    <StackLayout BackgroundColor="#f7f9fe">
        <ActivityIndicator IsVisible="{Binding IsBusy}" IsRunning="{Binding IsBusy}" />
        <RefreshView RefreshColor="#2196F3" IsRefreshing="{Binding IsRefreshing}" Command="{Binding RefreshCommand}">
            <ScrollView>
                <StackLayout>
                    <CollectionView ItemsSource="{Binding Categories}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <StackLayout Padding="7,5,7,0">
                                    <Border Padding="10,8" Margin="0,2,0,0" BackgroundColor="White">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="8*" />
                                                <ColumnDefinition Width="2*" />
                                            </Grid.ColumnDefinitions>
                                            <StackLayout Grid.Column="0" Orientation="Horizontal">
                                                <Label Text="{Binding Name}" TextColor="black" FontSize="14" FontAttributes="Bold"/>
                                            </StackLayout>
                                            <Grid Grid.Column="1">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <Label Grid.Column="0" Text="&#xe3c9;" FontFamily="MaterialIconsOutlined" FontSize="22" TextColor="Orange" VerticalOptions="Center">
                                                    <Label.GestureRecognizers>
                                                        <TapGestureRecognizer Command="{Binding Path=BindingContext.EditCommand, Source={RelativeSource AncestorType={x:Type ContentPage}}}"
                                                                      CommandParameter="{Binding Id}" />
                                                    </Label.GestureRecognizers>
                                                </Label>
                                                <Label Grid.Column="1" Text="&#xe872;" FontFamily="MaterialIconsOutlined" FontSize="23" TextColor="OrangeRed" VerticalOptions="Center">
                                                    <Label.GestureRecognizers>
                                                        <TapGestureRecognizer Command="{Binding Path=BindingContext.DeleteCommand, Source={RelativeSource AncestorType={x:Type ContentPage}}}"
                                                                      CommandParameter="{Binding Id}" />
                                                    </Label.GestureRecognizers>
                                                </Label>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </StackLayout>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </StackLayout>
            </ScrollView>
        </RefreshView>
    </StackLayout>
</ContentPage>